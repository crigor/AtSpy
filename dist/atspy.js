/**
 * typescript-spy-decorator v.1.0.0 - A @spy typescript decorator that allow to spy method calls for testing purposes
 * Copyright (c) 2015 Remo H. Jansen <remo.jansen@wolksoftware.com> (http://www.remojansen.com)
 * MIT
 * https://github.com/remojansen/typescript-spy-decorator
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.atspy=t()}}(function(){return function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var p=r[a]={exports:{}};e[a][0].call(p.exports,function(t){var r=e[a][1][t];return o(r?r:t)},p,p.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){var n=t("./decorators"),o=function(){function t(){this.decorators["class"]=n["class"],this.decorators.method=n.method}return t.prototype.getSpies=function(t){return t.spies},t.prototype.getCallStack=function(t){throw new Error("Not implemented exception")},t}(),i=new o;e.exports=i},{"./decorators":3}],2:[function(t,e,r){var n=t("./type_checker"),o=function(){function t(t,e,r){this.highResTimeStamp="undefined"==typeof performance&&"function"==typeof performance.now?performance.now():(new Date).getTime(),this.thisValue=new n(t),this.calledWithNew=e,this.args=[];for(var o=0;o<r.length;o++)this.args.push(new n(r[o]))}return t.prototype.calledOn=function(t){return this.thisValue.match(t)},t.prototype.calledWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t.length;if(r>this.args.length)return!1;for(var n=0;r>n;n+=1)if(!this.args[n].match(arguments[n]))return!1;return!0},t.prototype.calledWithExactly=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},t.prototype.notCalledWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return!this.calledWith(t)},t.prototype.calledWithMatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t.length;if(r>this.args.length)return!1;for(var n=0;r>n;n+=1){var o=t[n];if(!o(this.args[n]))return!1}return!0},t.prototype.notCalledWithMatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return!this.calledWithMatch.apply(this,t)},t.prototype.threw=function(t){return this.exception.isDefined()?!!this.exception:this.exception.value()===t||this.exception.value().name===t},t}();e.exports=o},{"./type_checker":5}],3:[function(t,e,r){function n(t,e,r){var n=r.value;return t.spies=t.spies||{},t.spies[e]=new u,r.value=function(){for(var r=[],o=0;o<arguments.length;o++)r[o-0]=arguments[o];var i,a,u,p;i=this,a=i.constructor==t,u=new l(i,a,r),p=null;try{return p=n.apply(i,r),u.returnValue=new s(p),t.spies[e].calls.push(u),p}catch(c){throw u.exception=c,u.returnValue=new s(void 0),t.spies[e].calls.push(u),c}},r}function o(t){function e(r,o){var i=Object.getOwnPropertyDescriptor(r,o);i?"function"==typeof i.value&&Object.defineProperty(t.prototype,o,__decorate([n],t.prototype,o,i)):e(Object.getPrototypeOf(r),o)}var r=t.prototype;for(var o in r)r[o]!==t&&e(r,o);return t}function i(){throw new Error("Not implemented exception")}function a(){throw new Error("Not implemented exception")}var u=t("./spy"),l=t("./call"),s=t("./type_checker"),p={"class":o,method:n,property:i,parameter:a};e.exports=p},{"./call":2,"./spy":4,"./type_checker":5}],4:[function(t,e,r){var n=function(){function t(){this.calls=[]}return t.prototype.getCalls=function(){return this.calls},t.prototype.callCount=function(){return this.calls.length},t.prototype.called=function(){return this.calls.length>0},t.prototype.calledOnce=function(){return 1===this.calls.length},t.prototype.calledTwice=function(){return 2===this.calls.length},t.prototype.calledThrice=function(){return 3===this.calls.length},t.prototype.firstCall=function(){return this.getCall(1)},t.prototype.secondCall=function(){return this.getCall(2)},t.prototype.thirdCall=function(){return this.getCall(3)},t.prototype.lastCall=function(){return this.getCall(this.calls.length)},t.prototype.getCall=function(t){return this.calls.length>=t?this.calls[t-1]:null},t.prototype.calledOn=function(t){for(var e=0;e<this.calls.length;e++)if(this.calls[e].thisValue.match(t))return!0;return!1},t.prototype.alwaysCalledOn=function(t){for(var e=0,r=0;r<this.calls.length;r++)this.calls[r].thisValue.match(t)&&(e+=1);return e===this.calls.length},t.prototype.calledBefore=function(t){throw new Error("Not implemented exception")},t.prototype.calledAfter=function(t){throw new Error("Not implemented exception")},t.prototype.withArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.calledWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.alwaysCalledWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.calledWithExactly=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.alwaysCalledWithExactly=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.calledWithMatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.alwaysCalledWithMatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.calledWithNew=function(){throw new Error("Not implemented exception")},t.prototype.neverCalledWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.neverCalledWithMatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented exception")},t.prototype.threw=function(t){throw new Error("Not implemented exception")},t.prototype.alwaysThrew=function(t){throw new Error("Not implemented exception")},t.prototype.returned=function(t){for(var e=0;e<this.calls.length;e++)if(this.calls[e].returnValue.match(t))return!0;return!1},t.prototype.alwaysReturned=function(t){for(var e=0,r=0;r<this.calls.length;r++)this.calls[r].returnValue.match(t)&&(e+=1);return e===this.calls.length},t.prototype.reset=function(){this.calls=[]},t}();e.exports=n},{}],5:[function(t,e,r){var n=function(){function t(t){this._value=t}return t.prototype.value=function(){return this._value},t.prototype.match=function(e){var r=new t(e),n=new t(this._value);if(r.isNumber())return n.isNumber()===!1?!1:this._value===e;if(r.isBool())return n.isBool()===!1?!1:this._value===e;if(r.isString())return n.isString()===!1?!1:this._value===e;if(r.isDefined()){if(r.isFunc())return n.isFunc()===!1?!1:this._value.toString()===e.toString();if(r.isRegexp())return n.isRegexp()===!1?!1:this._value.source===e.source&&this._value.global===e.global&&this._value.ignoreCase===e.ignoreCase&&this._value.multiline===e.multiline;if(r.isDate())return n.isDate()===!1?!1:this._value.valueOf()===e.valueOf();if(r.isArray()){if(n.isArray()===!1)return!1;if(this._value.length!==e.length)return!1;for(var o=0;o<this._value.length;o++)if(new t(this._value[o]).match(e[o])===!1)return!1;return!0}var i,a=0,u=0;for(i in this._value){if(a+=1,!(i in e))return!1;var l=new t(this._value[i]);if(!l.match(e[i]))return!1}for(i in e)u+=1;return a==u}return!n.isDefined()==!1?!1:this._value===e},t.prototype.isAny=function(){return!0},t.prototype.isDefined=function(){return null!==this._value&&void 0!==this._value},t.prototype.isTruthy=function(){return!!this._value},t.prototype.isFalsy=function(){return!this._value},t.prototype.isTypeOf=function(t){switch(t){case"array":return this.isArray();case"date":return this.isDate();case"regexp":return this.isRegexp();default:return typeof this._value===t}},t.prototype.isBool=function(){return this.isTypeOf("boolean")},t.prototype.isNumber=function(){return this.isTypeOf("number")},t.prototype.isString=function(){return this.isTypeOf("string")},t.prototype.isObject=function(){return this.isTypeOf("object")},t.prototype.isFunc=function(){return this.isTypeOf("function")},t.prototype.isArray=function(){return"undefined"==typeof Array.isArray?"[object Array]"==typeof this._value:Array.isArray(this._value)},t.prototype.isRegexp=function(){return this.isInstanceOf(RegExp)},t.prototype.isDate=function(){return"function"==typeof this._value.getMonth},t.prototype.isSame=function(t){return this._value===t},t.prototype.isInstanceOf=function(t){return this._value instanceof t},t.prototype.itHas=function(t){return"object"==typeof this._value?t in this._value:void 0!==this._value[t]},t.prototype.itHasOwn=function(t){return this._value.hasOwnProperty(t)},t}();e.exports=n},{}]},{},[1])(1)});